---
const { className } = Astro.props;


// Reviews data
const reviews = [
  {
    text: "Frau Heyl hat mit ihrer freundlichen Art und ihrem fundiertem Wissen, die ganze Gruppe begeistert. Vielen Dank !! Wir kommen wieder !!",
    date: "8.11.2024"
  },
  {
    text: "Selbst unsere eingefleischten Pfälzer, die aus der Region kommen und diese Region eigentlich gut kennen, haben viel Interessantes und Neues gehört und gelernt. Die Tour kam megagut in unserer Gruppe an.",
    date: "13.5.2025"
  },
  {
    text: "Die Tour war kurzweilig und lustig mit vielen Anekdoten.",
    date: "9.11.2024"
  },
  {
    text: "Die Tour war mit sehr viel Liebe zum Detail vorbereitet – man hat gespürt, wie viel Herzblut in der Gestaltung steckt.", 
    date: "13.5.2025"
  },
  {
    text: "Die Snacks waren sehr kreativ und haben super zum Thema und zu den Weinen gepasst. Es war sehr schön, dass es auch alkoholfreien Wein gab.",
    date: "12.11.2024"
  },
  {
    text: "Frau Heyl, hat es geschafft Geschichte lebendig werden zu lassen. Sie bindet gekonnt Ihr Gäste in die Führung mit ein. Es hat uns sehr viel Spaß gemacht.",
    date: "29.10.24"
  },
  {
    text:"Besonders beeindruckt hat mich der Ausblick – die Naturkulisse war traumhaft und hat für einige unvergessliche Momente gesorgt.",
    date: "13.5.2025"
  },
  {
    text: "Ein sehr schönes Konzept die Historie durch verteilte Rollen bei den Teilnehmern näher zu bringen. Leckere selbstgemachte Häppchen. Tolle Engagierte Tour-Führerin mit Esprit und Humor!",
    date: "7.10.2024"
  }
  ,
  {
    text:"Die Auswahl der Weine war wirklich hervorragend, jeder Tropfen ein Genuss! Auch die kleinen Snacks waren köstlich und schön angerichtet.",
    date: "13.5.2025"
  }
];

---

<section id="quotes-element" class={`w-full flex justify-center items-center ${className} `}>
  
    <!-- Quotes Section -->
    <div class="w-screen px-8 sm:px-0 md:max-w-6xl z-10
     md:w-full md:relative md:mb-12 md:mt-24 md:bg-none h-[550px]">
      <!-- Desktop Quotes -->
      <div class="text-center mb-12 hidden md:block">
        <h2 class="text-5xl xl:text-6xl font-bold font-bonanova tracking-tight">
          <span class="text-accent1">Was unsere Gäste sagen</span>
        </h2>
        <p class="text-xl xl:text-xl text-stone-600/80 font-medium">
          Authentische Erfahrungen von unseren Weinliebhabern
        </p>
      </div>
      
      <div class="relative h-[300px] md:h-[250px] flex items-center justify-center max-w-xs sm:max-w-xl mx-auto ">
        <!-- Left Arrow -->
        <button 
          id="prev-quote"
          class="absolute left-4 sm:-left-[5%]  z-20 p-2 rounded-full bg-white/80 hover:bg-white shadow-lg transition-all duration-300 hover:scale-110 group"
          onclick="previousQuote()"
        >
          <svg class="w-5 h-5 text-stone-600 group-hover:text-accent1 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>

        <!-- Right Arrow -->
        <button 
          id="next-quote"
          class="absolute right-4 sm:-right-[5%] z-20 p-2 rounded-full bg-white/80 hover:bg-white shadow-lg transition-all duration-300 hover:scale-110 group"
          onclick="nextQuote()"
        >
          <svg class="w-5 h-5 text-stone-600 group-hover:text-accent1 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>

        <div id="quotes-container" class="relative w-full max-w-4xl mx-auto px-8">
          {reviews.map((review, index) => (
            <div 
              id={`quote-${index}`}
              class={`absolute inset-0 flex flex-col items-center justify-center text-center transition-all duration-1000 ease-in-out ${
                index === 0 ? 'opacity-100' : 'opacity-0'
              }`}
            >
              <div class="relative">
                <svg class="absolute -top-8 -left-8 w-12 h-12 text-accent1/30 transform -rotate-12" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                </svg>
                <blockquote class="text-lg md:text-xl xl:text-2xl text-text/75 leading-relaxed font-medium italic px-8 py-4">
                  "{review.text}"
                </blockquote>
                <svg class="absolute -bottom-8 -right-8 w-12 h-12 text-accent1/30 transform rotate-12" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                </svg>
              </div>
              <p class="text-sm md:text-base text-stone-500 mt-6 font-medium">
                — {review.date}
              </p>
            </div>
          ))}
        </div>
        
        <!-- Quote indicators -->
        <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 flex space-x-2">
          {reviews.map((_, index) => (
            <button 
              id={`indicator-${index}`}
              class={`w-3 h-3 rounded-full transition-all duration-300 ${
                index === 0 ? 'bg-accent1/70 scale-110' : 'bg-stone-300 hover:bg-stone-400'
              }`}
              onclick={`showQuote(${index})`}
            ></button>
          ))}
        </div>
      </div>

      <!-- Mobile Quotes -->
      <div class="text-center mb-16 block md:hidden ">
        <h2 class="text-2xl sm:text-3xl font-bold font-bonanova tracking-tight">
          <span class="text-accent1">Was unsere Gäste sagen</span>
        </h2>
        <p class="max-w-44 sm:max-w-60  mx-auto text-sm sm:text-base text-stone-600/80 font-medium leading-tight mt-2">
          Authentische Erfahrungen unserer Weinliebhaber
        </p>
      </div>
    </div>
  


    <div class="h-[320px] md:h-[1000px] lg:h-[900px] relative md:absolute md:bottom-0 md:left-0 w-screen mx-auto
    bg-gradient-to-t from-white via-white/95 to-transparent"/>
    
    <script define:vars={{ reviews }}>
      let currentQuoteIndex = 0;
      const totalQuotes = reviews.length;
      let autoPlayInterval;

      function showQuote(index) {
        // Hide current quote
        const currentQuote = document.getElementById(`quote-${currentQuoteIndex}`);
        const currentIndicator = document.getElementById(`indicator-${currentQuoteIndex}`);
        
        if (currentQuote) {
          currentQuote.style.opacity = '0';
          currentQuote.style.transform = 'translateY(20px)';
        }
        if (currentIndicator) {
          currentIndicator.classList.remove('bg-accent1/70', 'scale-110');
          currentIndicator.classList.add('bg-stone-300');
        }

        // Show new quote
        const newQuote = document.getElementById(`quote-${index}`);
        const newIndicator = document.getElementById(`indicator-${index}`);
        
        if (newQuote) {
          newQuote.style.opacity = '1';
          newQuote.style.transform = 'translateY(0)';
        }
        if (newIndicator) {
          newIndicator.classList.add('bg-accent1/70', 'scale-110');
          newIndicator.classList.remove('bg-stone-300');
        }

        currentQuoteIndex = index;
      }

      function nextQuote() {
        const nextIndex = (currentQuoteIndex + 1) % totalQuotes;
        showQuote(nextIndex);
      }

      function previousQuote() {
        const prevIndex = currentQuoteIndex === 0 ? totalQuotes - 1 : currentQuoteIndex - 1;
        showQuote(prevIndex);
      }

      function startAutoPlay() {
        autoPlayInterval = setInterval(nextQuote, 5000); // Change quote every 5 seconds
      }

      function stopAutoPlay() {
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
        }
      }

      // Make functions globally accessible
      window.showQuote = showQuote;
      window.nextQuote = nextQuote;
      window.previousQuote = previousQuote;

      // Initialize
      document.addEventListener('DOMContentLoaded', function() {
        startAutoPlay();
        
        // Pause auto-play when hovering over quotes
        const quotesContainer = document.getElementById('quotes-container');
        if (quotesContainer) {
          quotesContainer.addEventListener('mouseenter', stopAutoPlay);
          quotesContainer.addEventListener('mouseleave', startAutoPlay);
        }
      });
    </script>
</section> 